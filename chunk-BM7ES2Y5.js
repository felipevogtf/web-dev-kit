import{h as I}from"./chunk-GE2WG3CC.js";import{$ as _,La as a,Oa as M,Ob as E,Pa as v,Q as g,Ra as w,T as m,W as p,_ as c,cb as C,nb as y,rb as b,sb as N,tb as O,z as f}from"./chunk-WVNT4QDC.js";var q=["editorContainer"];var h=new p("NGX_MONACO_EDITOR_CONFIG"),R=!1,j,D=(()=>{let e=class e{set insideNg(i){this._insideNg=i,this._editor&&(this._editor.dispose(),this.initMonaco(this._options,this.insideNg))}get insideNg(){return this._insideNg}constructor(i){this.config=i,this.onInit=new M,this._insideNg=!1}ngAfterViewInit(){R?j.then(()=>{this.initMonaco(this._options,this.insideNg)}):(R=!0,j=new Promise(i=>{let t=this.config.baseUrl||"./assets";if(typeof window.monaco=="object"){this.initMonaco(this._options,this.insideNg),i();return}let o=s=>{let l=s||window.require,u={paths:{vs:`${t}/monaco/min/vs`}};Object.assign(u,this.config.requireConfig||{}),l.config(u),l(["vs/editor/editor.main"],()=>{typeof this.config.onMonacoLoad=="function"&&this.config.onMonacoLoad(),this.initMonaco(this._options,this.insideNg),i()})};if(this.config.monacoRequire)o(this.config.monacoRequire);else if(window.require)if(window.require.config)o();else{var r=`${t}/monaco/min/vs/loader.js`,d=new XMLHttpRequest;d.addEventListener("load",()=>{let s=document.createElement("script");s.type="text/javascript",s.text=["var nodeRequire = require;",d.responseText.replace('"use strict";',""),"var monacoAmdRequire = require;","require = nodeRequire;","require.nodeRequire = require;"].join(`
`),document.body.appendChild(s),o(window.monacoAmdRequire)}),d.open("GET",r),d.send()}else{let s=document.createElement("script");s.type="text/javascript",s.src=`${t}/monaco/min/vs/loader.js`,s.addEventListener("load",()=>{o()}),document.body.appendChild(s)}}))}ngOnDestroy(){this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._editor&&(this._editor.dispose(),this._editor=void 0)}};e.\u0275fac=function(t){return new(t||e)(a(h))},e.\u0275cmp=c({type:e,selectors:[["ng-component"]],viewQuery:function(t,o){if(t&1&&N(q,7),t&2){let r;b(r=O())&&(o._editorContainer=r.first)}},inputs:{insideNg:"insideNg"},outputs:{onInit:"onInit"},decls:0,vars:0,template:function(t,o){},encapsulation:2});let n=e;return n})(),k=(()=>{let e=class e extends D{set options(i){this._options=Object.assign({},this.config.defaultOptions,i),this._editor&&(this._editor.dispose(),this.initMonaco(i,this.insideNg))}get options(){return this._options}set model(i){this.options.model=i,this._editor&&(this._editor.dispose(),this.initMonaco(this.options,this.insideNg))}constructor(i,t){super(t),this.zone=i,this.editorConfig=t,this._value="",this.propagateChange=o=>{},this.onTouched=()=>{}}writeValue(i){this._value=i||"",setTimeout(()=>{this._editor&&!this.options.model&&this._editor.setValue(this._value)})}registerOnChange(i){this.propagateChange=i}registerOnTouched(i){this.onTouched=i}initMonaco(i,t){let o=!!i.model;if(o){let r=monaco.editor.getModel(i.model.uri||"");r?(i.model=r,i.model.setValue(this._value)):i.model=monaco.editor.createModel(i.model.value,i.model.language,i.model.uri)}t?this._editor=monaco.editor.create(this._editorContainer.nativeElement,i):this.zone.runOutsideAngular(()=>{this._editor=monaco.editor.create(this._editorContainer.nativeElement,i)}),o||this._editor.setValue(this._value),this._editor.onDidChangeModelContent(r=>{let d=this._editor.getValue();this.zone.run(()=>{this.propagateChange(d),this._value=d})}),this._editor.onDidBlurEditorWidget(()=>{this.onTouched()}),this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._windowResizeSubscription=f(window,"resize").subscribe(()=>this._editor.layout()),this.onInit.emit(this._editor)}};e.\u0275fac=function(t){return new(t||e)(a(v),a(h))},e.\u0275cmp=c({type:e,selectors:[["ngx-monaco-editor"]],inputs:{options:"options",model:"model"},features:[y([{provide:I,useExisting:g(()=>e),multi:!0}]),w],decls:2,vars:0,consts:[[1,"editor-container"],["editorContainer",""]],template:function(t,o){t&1&&C(0,"div",0,1)},styles:["[_nghost-%COMP%]{display:block;height:200px}.editor-container[_ngcontent-%COMP%]{width:100%;height:98%}"]});let n=e;return n})();var U=(()=>{let e=class e{static forRoot(i={}){return{ngModule:e,providers:[{provide:h,useValue:i}]}}};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=_({type:e}),e.\u0275inj=m({imports:[E]});let n=e;return n})();export{k as a,U as b};
